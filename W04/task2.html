<html>

<head>
	<title>W04: Task 02</title>
</head>

<body>
	<script src="https://threejs.org/build/three.js"></script>
	<script src="task2.js"></script>
	<script>
		main();
	</script>
	<script>
		document.addEventListener('mousedown', mouse_down_event);
		function mouse_down_event(event) { // Mouse picking

			var x_win = event.clientX;
			var y_win = event.clientY;

			var vx = renderer.domElement.offsetLeft;
			var vy = renderer.domElement.offsetTop;
			var vw = renderer.domElement.width;
			var vh = renderer.domElement.height;
			var x_NDC = 2 * (x_win - vx) / vw - 1;
			var y_NDC = -(2 * (y_win - vy) / vh - 1);

			var p_NDC = new THREE.Vector3(x_NDC, y_NDC, 1);
			var p_wld = p_NDC.unproject(camera);

			var origin = p_NDC;
			var direction = p_wld;

			var raycaster = new THREE.Raycaster(origin, direction);
			var intersects = raycaster.intersectObject(triangle);
			if (intersects.length > 0) {
				intersects[0].face.color.setRGB(1, 0, 0);
				intersects[0].object.geometry.colorsNeedUpdate = true;
			}
		}
	</script>
</body>

</html>